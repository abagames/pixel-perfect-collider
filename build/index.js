!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ppc=e():t.ppc=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=0,o=[];const s="_ppcCacheIndex";let r={pixelTestFunction:(t,e,i,n)=>t+e+i>0&&n>0};e.setOptions=function(t){!function(t,e){for(let i in t)e(t[i],i)}(t,(t,e)=>{r[e]=t})};function u(t,e){const i=e%32,n=Math.floor(e/32);return 0===i?c(t,n):c(t,n)<<i>>>0|c(t,n+1)>>>32-i}function c(t,e){return e<0||e>=t.length?0:t[e]}e.Collider=class{constructor(t){if(this.pos={x:0,y:0},this.anchor={x:0,y:0},this.size={x:0,y:0},this.pixelBits=[],this.size.x=t.width,this.size.y=t.height,s in t)return void(this.pixelBits=o[t[s]]);const e=document.createElement("canvas");e.width=this.size.x,e.height=this.size.y;const i=e.getContext("2d");i.drawImage(t,0,0);const u=i.getImageData(0,0,this.size.x,this.size.y).data;let c=0;for(let t=0;t<this.size.y;t++){let t=[],e=0,i=1<<31>>>0;for(let n=0;n<this.size.x;n++)r.pixelTestFunction(u[c],u[c+1],u[c+2],u[c+3])&&(e|=i),(i>>>=1)<=0&&(t.push(e),i=1<<31>>>0,e=0),c+=4;i<1<<31>>>0&&t.push(e),this.pixelBits.push(t)}o.push(this.pixelBits),t[s]=n,n++}setPos(t,e){this.pos.x=Math.floor(t-this.size.x*this.anchor.x),this.pos.y=Math.floor(e-this.size.y*this.anchor.y)}setAnchor(t,e){this.anchor.x=t,this.anchor.y=e}test(t){const e={x:t.pos.x-this.pos.x,y:t.pos.y-this.pos.y};if(e.x<-t.size.x||e.x>this.size.x||e.y<-t.size.y||e.y>this.size.y)return!1;const i=e.x>0?e.x:0,n=e.x>0?0:-e.x;for(let o=e.y>0?e.y:0,s=e.y>0?0:-e.y;o<this.size.y&&!(s>=t.size.y);o++,s++)for(let e=i,r=n;e<this.size.x&&!(r>=t.size.x);e+=32,r+=32)if((u(this.pixelBits[o],e)&u(t.pixelBits[s],r))>0)return!0;return!1}},e.clearCache=function(){n=0,o=[]}}])});